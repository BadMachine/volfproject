{"ast":null,"code":"\"use strict\";\n\nvar __read = this && this.__read || function (o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n      r,\n      ar = [],\n      e;\n\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n\n  return ar;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CommonArrow = exports.CommonDiagonalArrow = exports.CommonDiagonalStrike = exports.CommonBorder2 = exports.CommonBorder = exports.arrowBBox = exports.diagonalArrowDef = exports.arrowDef = exports.arrowBBoxW = exports.arrowBBoxHD = exports.arrowHead = exports.fullBorder = exports.fullPadding = exports.fullBBox = exports.sideNames = exports.sideIndex = exports.SOLID = exports.PADDING = exports.THICKNESS = exports.ARROWY = exports.ARROWDX = exports.ARROWX = void 0;\nexports.ARROWX = 4, exports.ARROWDX = 1, exports.ARROWY = 2;\nexports.THICKNESS = .067;\nexports.PADDING = .2;\nexports.SOLID = exports.THICKNESS + 'em solid';\nexports.sideIndex = {\n  top: 0,\n  right: 1,\n  bottom: 2,\n  left: 3\n};\nexports.sideNames = Object.keys(exports.sideIndex);\n\nexports.fullBBox = function (node) {\n  return new Array(4).fill(node.thickness + node.padding);\n};\n\nexports.fullPadding = function (node) {\n  return new Array(4).fill(node.padding);\n};\n\nexports.fullBorder = function (node) {\n  return new Array(4).fill(node.thickness);\n};\n\nexports.arrowHead = function (node) {\n  return Math.max(node.padding, node.thickness * (node.arrowhead.x + node.arrowhead.dx + 1));\n};\n\nexports.arrowBBoxHD = function (node, TRBL) {\n  if (node.childNodes[0]) {\n    var _a = node.childNodes[0].getBBox(),\n        h = _a.h,\n        d = _a.d;\n\n    TRBL[0] = TRBL[2] = Math.max(0, node.thickness * node.arrowhead.y - (h + d) / 2);\n  }\n\n  return TRBL;\n};\n\nexports.arrowBBoxW = function (node, TRBL) {\n  if (node.childNodes[0]) {\n    var w = node.childNodes[0].getBBox().w;\n    TRBL[1] = TRBL[3] = Math.max(0, node.thickness * node.arrowhead.y - w / 2);\n  }\n\n  return TRBL;\n};\n\nexports.arrowDef = {\n  up: [-Math.PI / 2, false, true, 'verticalstrike'],\n  down: [Math.PI / 2, false, true, 'verticakstrike'],\n  right: [0, false, false, 'horizontalstrike'],\n  left: [Math.PI, false, false, 'horizontalstrike'],\n  updown: [Math.PI / 2, true, true, 'verticalstrike uparrow downarrow'],\n  leftright: [0, true, false, 'horizontalstrike leftarrow rightarrow']\n};\nexports.diagonalArrowDef = {\n  updiagonal: [-1, 0, false, 'updiagonalstrike northeastarrow'],\n  northeast: [-1, 0, false, 'updiagonalstrike updiagonalarrow'],\n  southeast: [1, 0, false, 'downdiagonalstrike'],\n  northwest: [1, Math.PI, false, 'downdiagonalstrike'],\n  southwest: [-1, Math.PI, false, 'updiagonalstrike'],\n  northeastsouthwest: [-1, 0, true, 'updiagonalstrike northeastarrow updiagonalarrow southwestarrow'],\n  northwestsoutheast: [1, 0, true, 'downdiagonalstrike northwestarrow southeastarrow']\n};\nexports.arrowBBox = {\n  up: function (node) {\n    return exports.arrowBBoxW(node, [exports.arrowHead(node), 0, node.padding, 0]);\n  },\n  down: function (node) {\n    return exports.arrowBBoxW(node, [node.padding, 0, exports.arrowHead(node), 0]);\n  },\n  right: function (node) {\n    return exports.arrowBBoxHD(node, [0, exports.arrowHead(node), 0, node.padding]);\n  },\n  left: function (node) {\n    return exports.arrowBBoxHD(node, [0, node.padding, 0, exports.arrowHead(node)]);\n  },\n  updown: function (node) {\n    return exports.arrowBBoxW(node, [exports.arrowHead(node), 0, exports.arrowHead(node), 0]);\n  },\n  leftright: function (node) {\n    return exports.arrowBBoxHD(node, [0, exports.arrowHead(node), 0, exports.arrowHead(node)]);\n  }\n};\n\nexports.CommonBorder = function (render) {\n  return function (side) {\n    var i = exports.sideIndex[side];\n    return [side, {\n      renderer: render,\n      bbox: function (node) {\n        var bbox = [0, 0, 0, 0];\n        bbox[i] = node.thickness + node.padding;\n        return bbox;\n      },\n      border: function (node) {\n        var bbox = [0, 0, 0, 0];\n        bbox[i] = node.thickness;\n        return bbox;\n      }\n    }];\n  };\n};\n\nexports.CommonBorder2 = function (render) {\n  return function (name, side1, side2) {\n    var i1 = exports.sideIndex[side1];\n    var i2 = exports.sideIndex[side2];\n    return [name, {\n      renderer: render,\n      bbox: function (node) {\n        var t = node.thickness + node.padding;\n        var bbox = [0, 0, 0, 0];\n        bbox[i1] = bbox[i2] = t;\n        return bbox;\n      },\n      border: function (node) {\n        var bbox = [0, 0, 0, 0];\n        bbox[i1] = bbox[i2] = node.thickness;\n        return bbox;\n      },\n      remove: side1 + ' ' + side2\n    }];\n  };\n};\n\nexports.CommonDiagonalStrike = function (render) {\n  return function (name) {\n    var cname = 'mjx-' + name.charAt(0) + 'strike';\n    return [name + 'diagonalstrike', {\n      renderer: render(cname),\n      bbox: exports.fullBBox\n    }];\n  };\n};\n\nexports.CommonDiagonalArrow = function (render) {\n  return function (name) {\n    var _a = __read(exports.diagonalArrowDef[name], 4),\n        c = _a[0],\n        pi = _a[1],\n        double = _a[2],\n        remove = _a[3];\n\n    return [name + 'arrow', {\n      renderer: function (node, _child) {\n        var _a = node.arrowData(),\n            a = _a.a,\n            W = _a.W;\n\n        var arrow = node.arrow(W, c * (a - pi), double);\n        render(node, arrow);\n      },\n      bbox: function (node) {\n        var _a = node.arrowData(),\n            a = _a.a,\n            x = _a.x,\n            y = _a.y;\n\n        var _b = __read([node.arrowhead.x, node.arrowhead.y, node.arrowhead.dx], 3),\n            ax = _b[0],\n            ay = _b[1],\n            adx = _b[2];\n\n        var _c = __read(node.getArgMod(ax + adx, ay), 2),\n            b = _c[0],\n            ar = _c[1];\n\n        var dy = y + (b > a ? node.thickness * ar * Math.sin(b - a) : 0);\n        var dx = x + (b > Math.PI / 2 - a ? node.thickness * ar * Math.sin(b + a - Math.PI / 2) : 0);\n        return [dy, dx, dy, dx];\n      },\n      remove: remove\n    }];\n  };\n};\n\nexports.CommonArrow = function (render) {\n  return function (name) {\n    var _a = __read(exports.arrowDef[name], 4),\n        angle = _a[0],\n        double = _a[1],\n        isVertical = _a[2],\n        remove = _a[3];\n\n    return [name + 'arrow', {\n      renderer: function (node, _child) {\n        var _a = node.getBBox(),\n            w = _a.w,\n            h = _a.h,\n            d = _a.d;\n\n        var W = isVertical ? h + d : w;\n        var arrow = node.arrow(W, angle, double);\n        render(node, arrow);\n      },\n      bbox: exports.arrowBBox[name],\n      remove: remove\n    }];\n  };\n};","map":{"version":3,"sources":["../../../ts/output/common/Notation.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CommonArrow = exports.CommonDiagonalArrow = exports.CommonDiagonalStrike = exports.CommonBorder2 = exports.CommonBorder = exports.arrowBBox = exports.diagonalArrowDef = exports.arrowDef = exports.arrowBBoxW = exports.arrowBBoxHD = exports.arrowHead = exports.fullBorder = exports.fullPadding = exports.fullBBox = exports.sideNames = exports.sideIndex = exports.SOLID = exports.PADDING = exports.THICKNESS = exports.ARROWY = exports.ARROWDX = exports.ARROWX = void 0;\nexports.ARROWX = 4, exports.ARROWDX = 1, exports.ARROWY = 2;\nexports.THICKNESS = .067;\nexports.PADDING = .2;\nexports.SOLID = exports.THICKNESS + 'em solid';\nexports.sideIndex = { top: 0, right: 1, bottom: 2, left: 3 };\nexports.sideNames = Object.keys(exports.sideIndex);\nexports.fullBBox = (function (node) { return new Array(4).fill(node.thickness + node.padding); });\nexports.fullPadding = (function (node) { return new Array(4).fill(node.padding); });\nexports.fullBorder = (function (node) { return new Array(4).fill(node.thickness); });\nexports.arrowHead = function (node) {\n    return Math.max(node.padding, node.thickness * (node.arrowhead.x + node.arrowhead.dx + 1));\n};\nexports.arrowBBoxHD = function (node, TRBL) {\n    if (node.childNodes[0]) {\n        var _a = node.childNodes[0].getBBox(), h = _a.h, d = _a.d;\n        TRBL[0] = TRBL[2] = Math.max(0, node.thickness * node.arrowhead.y - (h + d) / 2);\n    }\n    return TRBL;\n};\nexports.arrowBBoxW = function (node, TRBL) {\n    if (node.childNodes[0]) {\n        var w = node.childNodes[0].getBBox().w;\n        TRBL[1] = TRBL[3] = Math.max(0, node.thickness * node.arrowhead.y - w / 2);\n    }\n    return TRBL;\n};\nexports.arrowDef = {\n    up: [-Math.PI / 2, false, true, 'verticalstrike'],\n    down: [Math.PI / 2, false, true, 'verticakstrike'],\n    right: [0, false, false, 'horizontalstrike'],\n    left: [Math.PI, false, false, 'horizontalstrike'],\n    updown: [Math.PI / 2, true, true, 'verticalstrike uparrow downarrow'],\n    leftright: [0, true, false, 'horizontalstrike leftarrow rightarrow']\n};\nexports.diagonalArrowDef = {\n    updiagonal: [-1, 0, false, 'updiagonalstrike northeastarrow'],\n    northeast: [-1, 0, false, 'updiagonalstrike updiagonalarrow'],\n    southeast: [1, 0, false, 'downdiagonalstrike'],\n    northwest: [1, Math.PI, false, 'downdiagonalstrike'],\n    southwest: [-1, Math.PI, false, 'updiagonalstrike'],\n    northeastsouthwest: [-1, 0, true, 'updiagonalstrike northeastarrow updiagonalarrow southwestarrow'],\n    northwestsoutheast: [1, 0, true, 'downdiagonalstrike northwestarrow southeastarrow']\n};\nexports.arrowBBox = {\n    up: function (node) { return exports.arrowBBoxW(node, [exports.arrowHead(node), 0, node.padding, 0]); },\n    down: function (node) { return exports.arrowBBoxW(node, [node.padding, 0, exports.arrowHead(node), 0]); },\n    right: function (node) { return exports.arrowBBoxHD(node, [0, exports.arrowHead(node), 0, node.padding]); },\n    left: function (node) { return exports.arrowBBoxHD(node, [0, node.padding, 0, exports.arrowHead(node)]); },\n    updown: function (node) { return exports.arrowBBoxW(node, [exports.arrowHead(node), 0, exports.arrowHead(node), 0]); },\n    leftright: function (node) { return exports.arrowBBoxHD(node, [0, exports.arrowHead(node), 0, exports.arrowHead(node)]); }\n};\nexports.CommonBorder = function (render) {\n    return function (side) {\n        var i = exports.sideIndex[side];\n        return [side, {\n                renderer: render,\n                bbox: function (node) {\n                    var bbox = [0, 0, 0, 0];\n                    bbox[i] = node.thickness + node.padding;\n                    return bbox;\n                },\n                border: function (node) {\n                    var bbox = [0, 0, 0, 0];\n                    bbox[i] = node.thickness;\n                    return bbox;\n                }\n            }];\n    };\n};\nexports.CommonBorder2 = function (render) {\n    return function (name, side1, side2) {\n        var i1 = exports.sideIndex[side1];\n        var i2 = exports.sideIndex[side2];\n        return [name, {\n                renderer: render,\n                bbox: function (node) {\n                    var t = node.thickness + node.padding;\n                    var bbox = [0, 0, 0, 0];\n                    bbox[i1] = bbox[i2] = t;\n                    return bbox;\n                },\n                border: function (node) {\n                    var bbox = [0, 0, 0, 0];\n                    bbox[i1] = bbox[i2] = node.thickness;\n                    return bbox;\n                },\n                remove: side1 + ' ' + side2\n            }];\n    };\n};\nexports.CommonDiagonalStrike = function (render) {\n    return function (name) {\n        var cname = 'mjx-' + name.charAt(0) + 'strike';\n        return [name + 'diagonalstrike', {\n                renderer: render(cname),\n                bbox: exports.fullBBox\n            }];\n    };\n};\nexports.CommonDiagonalArrow = function (render) {\n    return function (name) {\n        var _a = __read(exports.diagonalArrowDef[name], 4), c = _a[0], pi = _a[1], double = _a[2], remove = _a[3];\n        return [name + 'arrow', {\n                renderer: function (node, _child) {\n                    var _a = node.arrowData(), a = _a.a, W = _a.W;\n                    var arrow = node.arrow(W, c * (a - pi), double);\n                    render(node, arrow);\n                },\n                bbox: function (node) {\n                    var _a = node.arrowData(), a = _a.a, x = _a.x, y = _a.y;\n                    var _b = __read([node.arrowhead.x, node.arrowhead.y, node.arrowhead.dx], 3), ax = _b[0], ay = _b[1], adx = _b[2];\n                    var _c = __read(node.getArgMod(ax + adx, ay), 2), b = _c[0], ar = _c[1];\n                    var dy = y + (b > a ? node.thickness * ar * Math.sin(b - a) : 0);\n                    var dx = x + (b > Math.PI / 2 - a ? node.thickness * ar * Math.sin(b + a - Math.PI / 2) : 0);\n                    return [dy, dx, dy, dx];\n                },\n                remove: remove\n            }];\n    };\n};\nexports.CommonArrow = function (render) {\n    return function (name) {\n        var _a = __read(exports.arrowDef[name], 4), angle = _a[0], double = _a[1], isVertical = _a[2], remove = _a[3];\n        return [name + 'arrow', {\n                renderer: function (node, _child) {\n                    var _a = node.getBBox(), w = _a.w, h = _a.h, d = _a.d;\n                    var W = (isVertical ? h + d : w);\n                    var arrow = node.arrow(W, angle, double);\n                    render(node, arrow);\n                },\n                bbox: exports.arrowBBox[name],\n                remove: remove\n            }];\n    };\n};\n//# sourceMappingURL=Notation.js.map"]},"metadata":{},"sourceType":"script"}