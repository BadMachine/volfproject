{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Bumpy\\\\WebstormProjects\\\\volfproject\\\\src\\\\components\\\\QuickSortChart.tsx\";\nimport React, { Component } from 'react';\nimport { Bar } from 'react-chartjs-2';\nimport { chartjsDataTemplate, generateColorsForChart } from '../interfaces/SortInterfaces';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass QuickSortChart extends Component {\n  constructor(props) {\n    super(props);\n    this.chartReference = void 0;\n    this.chart = void 0;\n    this.timer = void 0;\n    this.isSorting = void 0;\n    this.interrupt = void 0;\n    this.uselessRefresh = void 0;\n    this.state = void 0;\n    this.props = void 0;\n    this.timeouts = void 0;\n    this.date = void 0;\n\n    this.partition = (items, left, right, timeout) => {\n      const pivot = items[Math.floor((right + left) / 2)];\n      let i = left,\n          j = right;\n      const labels = this.chart.data.labels;\n      const colors = this.chart.data.datasets[0].backgroundColor;\n\n      while (i <= j) {\n        while (items[i] < pivot) {\n          i++;\n        }\n\n        while (items[j] > pivot) {\n          j--;\n        }\n\n        if (i <= j) {\n          const theTimeout = this.updateChartDelayed(labels.slice(0), items.slice(0), colors.slice(0), timeout);\n          this.timeouts.push(theTimeout);\n          [items[i], items[j]] = [items[j], items[i]];\n          i++;\n          j--;\n        }\n      }\n\n      return i;\n    };\n\n    this.quickSort = (left, data, right, timeout) => {\n      const labels = this.chart.data.labels;\n      const colors = this.chart.data.datasets[0].backgroundColor;\n\n      if (timeout === undefined) {\n        timeout = 0;\n      }\n\n      if (data === undefined) {\n        data = this.chart.data.datasets[0].data;\n      }\n\n      if (right === undefined) {\n        right = data.length - 1;\n      }\n\n      let index;\n\n      if (data.length > 1) {\n        index = this.partition(data, left, right, timer);\n\n        if (left < index - 1) {\n          timeout += 100;\n          const theTimeout = this.updateChartDelayed(labels.slice(0), data.slice(0), colors.slice(0), timeout);\n          this.timeouts.push(theTimeout);\n          this.quickSort(left, data, index - 1, timeout);\n        }\n\n        if (index < right) {\n          timeout += 100;\n          const theTimeout = this.updateChartDelayed(labels.slice(0), data.slice(0), colors.slice(0), timeout);\n          this.timeouts.push(theTimeout);\n          this.quickSort(index, data, right, timeout);\n        }\n      }\n\n      return [data];\n    };\n\n    this.equals = (a, b) => JSON.stringify(a) === JSON.stringify(b);\n\n    this.state = chartjsDataTemplate;\n    this.chartReference = /*#__PURE__*/React.createRef();\n    this.timer = 0;\n    this.isSorting = false;\n    this.interrupt = false;\n    this.date = 0;\n    this.uselessRefresh = false;\n    this.timeouts = [];\n  }\n\n  componentDidMount() {\n    this.chart = this.chartReference.current.chartInstance;\n  }\n\n  updateChartDelayed(labels, data, colors, timeout) {\n    this.timer = setTimeout(() => {\n      const now = new Date().getTime();\n      const timeDifference = now - this.date;\n      const seconds = Math.floor(timeDifference % (1000 * 60) / 1000);\n      const mils = Math.floor(timeDifference % (1000 * 60) / 1);\n      this.isSorting = true;\n      this.chart.data.datasets[0].label = `${seconds}s ${mils.toString().substr(-3)}ms`;\n      this.chart.data.labels = labels;\n      this.chart.data.datasets[0].data = data;\n      this.chart.data.datasets[0].backgroundColor = colors;\n      this.chart.update();\n      const eth = [...this.chart.data.datasets[0].data].sort((x, y) => x - y);\n\n      if (eth.toString() === this.chart.data.datasets[0].data.toString()) {\n        this.props.callback();\n      }\n    }, timeout);\n    return this.timer;\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.timer);\n  }\n\n  clearAllTimeouts() {\n    for (const timeout in this.timeouts) {\n      clearInterval(this.timeouts[timeout]);\n    }\n\n    this.timeouts = [];\n  }\n\n  refreshChart() {\n    console.log(this.props.commands.arrayLength);\n    const temporaryDataToSort = chartjsDataTemplate;\n    temporaryDataToSort.datasets[0].data = Array.from({\n      length: this.props.commands.arrayLength\n    }, () => Math.floor(Math.random() * 1000));\n    temporaryDataToSort.labels = Array.from({\n      length: this.props.commands.arrayLength\n    }, (_, i) => (i + 1).toString());\n    [temporaryDataToSort.datasets[0].backgroundColor, temporaryDataToSort.datasets[0].borderColor] = generateColorsForChart(this.props.commands.arrayLength, 0.4);\n    console.log(temporaryDataToSort.datasets[0].data);\n    this.setState(temporaryDataToSort);\n  }\n\n  componentDidUpdate(prevProps) {\n    console.log('QUICK TRIGGERED!');\n\n    if (JSON.stringify(prevProps) !== JSON.stringify(this.props)) {\n      this.date = new Date(Date.now()).getTime();\n      this.clearAllTimeouts();\n\n      if (this.props.commands.StopSort) {\n        this.clearAllTimeouts();\n      } else if (this.props.commands.name !== prevProps.commands.name && this.props.commands.arrayLength !== prevProps.commands.arrayLength) {\n        this.clearAllTimeouts();\n        this.refreshChart();\n        setTimeout(() => {\n          this.quickSort(0);\n        }, 800);\n      } else if (this.props.commands.name !== prevProps.commands.name) {\n        this.quickSort(0);\n      } else if (this.props.commands.arrayLength !== prevProps.commands.arrayLength) {\n        this.refreshChart();\n        this.clearAllTimeouts();\n        setTimeout(() => {\n          this.quickSort(0);\n        }, 800);\n      } else if (this.props.commands.arrayLength === prevProps.commands.arrayLength) {\n        this.refreshChart();\n        this.clearAllTimeouts();\n        setTimeout(() => {\n          this.quickSort(0);\n        }, 800);\n      }\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(Bar, {\n        data: this.state,\n        width: 100,\n        height: 50,\n        options: {\n          legend: {\n            display: true,\n            position: 'top',\n            labels: {\n              boxWidth: 0\n            }\n          }\n        },\n        ref: this.chartReference\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 4\n    }, this);\n  }\n\n}\n\nexport const MemorizedQuickChart = /*#__PURE__*/React.memo(QuickSortChart);\n_c = MemorizedQuickChart;\n\nvar _c;\n\n$RefreshReg$(_c, \"MemorizedQuickChart\");","map":{"version":3,"sources":["C:/Users/Bumpy/WebstormProjects/volfproject/src/components/QuickSortChart.tsx"],"names":["React","Component","Bar","chartjsDataTemplate","generateColorsForChart","QuickSortChart","constructor","props","chartReference","chart","timer","isSorting","interrupt","uselessRefresh","state","timeouts","date","partition","items","left","right","timeout","pivot","Math","floor","i","j","labels","data","colors","datasets","backgroundColor","theTimeout","updateChartDelayed","slice","push","quickSort","undefined","length","index","equals","a","b","JSON","stringify","createRef","componentDidMount","current","chartInstance","setTimeout","now","Date","getTime","timeDifference","seconds","mils","label","toString","substr","update","eth","sort","x","y","callback","componentWillUnmount","clearInterval","clearAllTimeouts","refreshChart","console","log","commands","arrayLength","temporaryDataToSort","Array","from","random","_","borderColor","setState","componentDidUpdate","prevProps","StopSort","name","render","legend","display","position","boxWidth","MemorizedQuickChart","memo"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\r\nimport {Bar} from 'react-chartjs-2';\r\nimport {CommandsInterface, chartjsDataTemplate, generateColorsForChart} from '../interfaces/SortInterfaces';\r\nimport {sortingStore} from './ModalContent';\r\nimport {quickSort} from '../redux/SortingStateReducer';\r\n\r\n\r\nclass QuickSortChart extends Component<CommandsInterface>{\r\n\tprivate chartReference: React.RefObject<any>;\r\n\tprivate chart: any;\r\n\tprivate timer: any;\r\n\tprivate isSorting: boolean;\r\n\tprivate interrupt: boolean;\r\n\tprivate uselessRefresh: boolean;\r\n\tpublic state;\r\n\tpublic props: any;\r\n\tprivate timeouts:number[];\r\n\tprivate date: number;\r\n\r\n\tconstructor(props: CommandsInterface) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = chartjsDataTemplate;\r\n\r\n\t\tthis.chartReference = React.createRef<any>();\r\n\r\n\t\tthis.timer = 0;\r\n\r\n\t\tthis.isSorting = false;\r\n\r\n\t\tthis.interrupt = false;\r\n\r\n\t\tthis.date = 0;\r\n\r\n\r\n\t\tthis.uselessRefresh = false;\r\n\t\tthis.timeouts = [];\r\n\r\n\t}\r\n\r\n\r\n\tpartition = (items:number[], left:number, right:number, timeout:number) => {\r\n\r\n\t\tconst pivot   = items[Math.floor((right + left) / 2)];\r\n\t\tlet i = left, j = right;\r\n\t\tconst labels = this.chart.data.labels;\r\n\t\tconst colors = this.chart.data.datasets[0].backgroundColor;\r\n\r\n\t\twhile (i <= j) {\r\n\t\t\twhile (items[i] < pivot) {\r\n\t\t\t\ti++;\r\n\t\t\t}\r\n\t\t\twhile (items[j] > pivot) {\r\n\t\t\t\tj--;\r\n\t\t\t}\r\n\t\t\tif (i <= j) {\r\n\t\t\t\tconst theTimeout = this.updateChartDelayed(labels.slice(0), items!.slice(0), colors.slice(0), timeout);\r\n\t\t\t\tthis.timeouts.push(theTimeout);\r\n\t\t\t\t[items[i], items[j]] = [items[j], items[i]];\r\n\t\t\t\ti++;\r\n\t\t\t\tj--;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn i;\r\n\t}\r\n\r\n\r\n\r\n\r\n\tquickSort = (left:number,data?:number[], right?:number, timeout?:number) => {\r\n\r\n\t\tconst labels = this.chart.data.labels;\r\n\t\tconst colors = this.chart.data.datasets[0].backgroundColor;\r\n\r\n\t\tif(timeout===undefined) {timeout = 0;}\r\n\t\tif(data===undefined) {data = this.chart.data.datasets[0].data;}\r\n\r\n\t\tif(right===undefined) {right = data!.length-1;}\r\n\r\n\t\tlet index;\r\n\t\tif (data!.length > 1) {\r\n\t\t\tindex = this.partition(data!, left, right, timer);\r\n\r\n\t\t\tif (left < index - 1) {\r\n\r\n\t\t\t\ttimeout += 100;\r\n\t\t\t\tconst theTimeout = this.updateChartDelayed(labels.slice(0), data!.slice(0), colors.slice(0), timeout);\r\n\t\t\t\tthis.timeouts.push(theTimeout);\r\n\t\t\t\tthis.quickSort(left, data, index - 1, timeout);\r\n\r\n\t\t\t}\r\n\t\t\tif (index < right) {\r\n\t\t\t\ttimeout += 100;\r\n\t\t\t\tconst theTimeout = this.updateChartDelayed(labels.slice(0), data!.slice(0), colors.slice(0), timeout);\r\n\t\t\t\tthis.timeouts.push(theTimeout);\r\n\t\t\t\tthis.quickSort(index,data, right, timeout);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn [data];\r\n\t};\r\n\r\n\tequals = (a:number[], b:number[]) => JSON.stringify(a) === JSON.stringify(b);\r\n\r\n\tcomponentDidMount(){\r\n\r\n\t\tthis.chart = this.chartReference.current.chartInstance;\r\n\t}\r\n\r\n\r\n\tupdateChartDelayed(labels: string[], data:number[], colors:string[], timeout:number) {\r\n\r\n\r\n\t\tthis.timer = setTimeout(() => {\r\n\r\n\t\t\tconst now = new Date().getTime();\r\n\r\n\t\t\tconst timeDifference  = now - this.date;\r\n\t\t\tconst seconds = Math.floor((timeDifference % (1000 * 60)) / 1000);\r\n\t\t\tconst mils = Math.floor((timeDifference % (1000 * 60)) / 1);\r\n\r\n\t\t\tthis.isSorting = true;\r\n\t\t\tthis.chart.data.datasets[0].label =  `${seconds}s ${mils.toString().substr(-3)}ms`  ;\r\n\t\t\tthis.chart.data.labels = labels;\r\n\t\t\tthis.chart.data.datasets[0].data = data;\r\n\t\t\tthis.chart.data.datasets[0].backgroundColor = colors;\r\n\t\t\tthis.chart.update();\r\n\r\n\t\t\tconst eth = [...this.chart.data.datasets[0].data].sort((x,y)=> x-y);\r\n\t\t\tif( eth.toString() === this.chart.data.datasets[0].data.toString()) {\r\n\t\t\t\tthis.props.callback();\r\n\t\t\t}\r\n\r\n\r\n\t\t}, timeout);\r\n\r\n\r\n\r\n\t\treturn this.timer;\r\n\t}\r\n\r\n\tcomponentWillUnmount() {\r\n\t\tclearInterval(this.timer);\r\n\r\n\t}\r\n\r\n\r\n\tclearAllTimeouts(){\r\n\t\tfor(const timeout in this.timeouts){\r\n\t\t\tclearInterval(this.timeouts[timeout]);\r\n\t\t}\r\n\t\tthis.timeouts=[];\r\n\t}\r\n\r\n\trefreshChart(){\r\n\t\tconsole.log(this.props.commands.arrayLength);\r\n\t\tconst temporaryDataToSort = chartjsDataTemplate;\r\n\t\ttemporaryDataToSort.datasets[0].data = Array.from({length: this.props.commands.arrayLength}, () => Math.floor(Math.random() * 1000));\r\n\t\ttemporaryDataToSort.labels = Array.from({ length: this.props.commands.arrayLength }, (_, i) => (i+1).toString());\r\n\t\t[temporaryDataToSort.datasets[0].backgroundColor, temporaryDataToSort.datasets[0].borderColor] = generateColorsForChart(this.props.commands.arrayLength, 0.4);\r\n\r\n\t\tconsole.log(temporaryDataToSort.datasets[0].data);\r\n\t\tthis.setState(temporaryDataToSort);\r\n\t}\r\n\r\n\r\n\tcomponentDidUpdate(prevProps:CommandsInterface) {\r\n\r\n\t\tconsole.log('QUICK TRIGGERED!');\r\n\r\n\t\tif(JSON.stringify(prevProps)!==JSON.stringify(this.props)) {\r\n\r\n\r\n\t\t\tthis.date = new Date(Date.now()).getTime();\r\n\r\n\t\t\tthis.clearAllTimeouts();\r\n\r\n\t\t\tif (this.props.commands.StopSort) {\r\n\r\n\t\t\t\tthis.clearAllTimeouts();\r\n\r\n\t\t\t} else if (this.props.commands.name !== prevProps.commands.name && this.props.commands.arrayLength !== prevProps.commands.arrayLength) {\r\n\r\n\t\t\t\tthis.clearAllTimeouts();\r\n\t\t\t\tthis.refreshChart();\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.quickSort(0);\r\n\t\t\t\t}, 800);\r\n\t\t\t} else if (this.props.commands.name !== prevProps.commands.name) {\r\n\r\n\t\t\t\tthis.quickSort(0);\r\n\t\t\t} else if (this.props.commands.arrayLength !== prevProps.commands.arrayLength) {\r\n\r\n\t\t\t\tthis.refreshChart();\r\n\t\t\t\tthis.clearAllTimeouts();\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.quickSort(0);\r\n\t\t\t\t}, 800);\r\n\r\n\t\t\t} else if (this.props.commands.arrayLength === prevProps.commands.arrayLength) {\r\n\r\n\t\t\t\tthis.refreshChart();\r\n\t\t\t\tthis.clearAllTimeouts();\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.quickSort(0);\r\n\t\t\t\t}, 800);\r\n\t\t\t}\r\n\r\n\r\n\r\n\t\t}\r\n\t}\r\n\r\n\r\n\r\n\r\n\trender(){\r\n\t\treturn(\r\n\t\t\t<div>\r\n\t\t\t\t<Bar data={this.state} width={100} height={50} options={{\r\n\t\t\t\t\tlegend: {\r\n\t\t\t\t\t\tdisplay: true,\r\n\t\t\t\t\t\tposition: 'top',\r\n\t\t\t\t\t\tlabels: {\r\n\t\t\t\t\t\t\tboxWidth: 0,\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}} ref={this.chartReference}/>\r\n\t\t\t</div>\r\n\t\t);\r\n\r\n\t}\r\n\r\n\r\n}\r\nexport const MemorizedQuickChart = React.memo(QuickSortChart);\r\n"]},"metadata":{},"sourceType":"module"}