{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __read = this && this.__read || function (o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n      r,\n      ar = [],\n      e;\n\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n\n  return ar;\n};\n\nvar __spread = this && this.__spread || function () {\n  for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));\n\n  return ar;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SVGmtable = void 0;\n\nvar Wrapper_js_1 = require(\"../Wrapper.js\");\n\nvar mtable_js_1 = require(\"../../common/Wrappers/mtable.js\");\n\nvar mtable_js_2 = require(\"../../../core/MmlTree/MmlNodes/mtable.js\");\n\nvar CLASSPREFIX = 'mjx-';\n\nvar SVGmtable = function (_super) {\n  __extends(SVGmtable, _super);\n\n  function SVGmtable(factory, node, parent) {\n    if (parent === void 0) {\n      parent = null;\n    }\n\n    var _this = _super.call(this, factory, node, parent) || this;\n\n    var def = {\n      'data-labels': true\n    };\n\n    if (_this.isTop) {\n      def.transform = 'matrix(1 0 0 -1 0 0)';\n    }\n\n    _this.labels = _this.svg('g', def);\n    return _this;\n  }\n\n  SVGmtable.prototype.toSVG = function (parent) {\n    var svg = this.standardSVGnode(parent);\n    this.placeRows(svg);\n    this.handleColumnLines(svg);\n    this.handleRowLines(svg);\n    this.handleFrame(svg);\n    var dx = this.handlePWidth(svg);\n    this.handleLabels(svg, parent, dx);\n  };\n\n  SVGmtable.prototype.placeRows = function (svg) {\n    var _a, _b, _c;\n\n    var equal = this.node.attributes.get('equalrows');\n\n    var _d = this.getTableData(),\n        H = _d.H,\n        D = _d.D;\n\n    var HD = this.getEqualRowHeight();\n    var rSpace = this.getRowHalfSpacing();\n\n    var rLines = __spread([this.fLine], this.rLines, [this.fLine]);\n\n    var y = this.getBBox().h - rLines[0];\n\n    for (var i = 0; i < this.numRows; i++) {\n      var row = this.childNodes[i];\n      _a = __read(this.getRowHD(equal, HD, H[i], D[i]), 2), row.H = _a[0], row.D = _a[1];\n      _b = __read([rSpace[i], rSpace[i + 1]], 2), row.tSpace = _b[0], row.bSpace = _b[1];\n      _c = __read([rLines[i], rLines[i + 1]], 2), row.tLine = _c[0], row.bLine = _c[1];\n      row.toSVG(svg);\n      row.place(0, y - rSpace[i] - row.H);\n      y -= rSpace[i] + row.H + row.D + rSpace[i + 1] + rLines[i + 1];\n    }\n  };\n\n  SVGmtable.prototype.getRowHD = function (equal, HD, H, D) {\n    return equal ? [(HD + H - D) / 2, (HD - H + D) / 2] : [H, D];\n  };\n\n  SVGmtable.prototype.handleColor = function () {\n    _super.prototype.handleColor.call(this);\n\n    var rect = this.adaptor.firstChild(this.element);\n\n    if (rect) {\n      this.adaptor.setAttribute(rect, 'width', this.fixed(this.getWidth()));\n    }\n  };\n\n  SVGmtable.prototype.handleColumnLines = function (svg) {\n    if (this.node.attributes.get('columnlines') === 'none') return;\n    var lines = this.getColumnAttributes('columnlines');\n    if (!lines) return;\n    var cSpace = this.getColumnHalfSpacing();\n    var cLines = this.cLines;\n    var cWidth = this.getComputedWidths();\n    var x = this.fLine;\n\n    for (var i = 0; i < lines.length; i++) {\n      x += cSpace[i] + cWidth[i] + cSpace[i + 1];\n\n      if (lines[i] !== 'none') {\n        this.adaptor.append(svg, this.makeVLine(x, lines[i], cLines[i]));\n      }\n\n      x += cLines[i];\n    }\n  };\n\n  SVGmtable.prototype.handleRowLines = function (svg) {\n    if (this.node.attributes.get('rowlines') === 'none') return;\n    var lines = this.getRowAttributes('rowlines');\n    if (!lines) return;\n    var equal = this.node.attributes.get('equalrows');\n\n    var _a = this.getTableData(),\n        H = _a.H,\n        D = _a.D;\n\n    var HD = this.getEqualRowHeight();\n    var rSpace = this.getRowHalfSpacing();\n    var rLines = this.rLines;\n    var y = this.getBBox().h - this.fLine;\n\n    for (var i = 0; i < lines.length; i++) {\n      var _b = __read(this.getRowHD(equal, HD, H[i], D[i]), 2),\n          rH = _b[0],\n          rD = _b[1];\n\n      y -= rSpace[i] + rH + rD + rSpace[i + 1];\n\n      if (lines[i] !== 'none') {\n        this.adaptor.append(svg, this.makeHLine(y, lines[i], rLines[i]));\n      }\n\n      y -= rLines[i];\n    }\n  };\n\n  SVGmtable.prototype.handleFrame = function (svg) {\n    if (this.frame) {\n      var _a = this.getBBox(),\n          h = _a.h,\n          d = _a.d,\n          w = _a.w;\n\n      var style = this.node.attributes.get('frame');\n      this.adaptor.append(svg, this.makeFrame(w, h, d, style));\n    }\n  };\n\n  SVGmtable.prototype.handlePWidth = function (svg) {\n    if (!this.pWidth) {\n      return 0;\n    }\n\n    var _a = this.getBBox(),\n        w = _a.w,\n        L = _a.L,\n        R = _a.R;\n\n    var W = L + this.pWidth + R;\n    var align = this.getAlignShift()[0];\n    var CW = Math.max(this.isTop ? W : 0, this.container.getWrapWidth(this.containerI)) - L - R;\n    var dw = w - (this.pWidth > CW ? CW : this.pWidth);\n    var dx = align === 'left' ? 0 : align === 'right' ? dw : dw / 2;\n\n    if (dx) {\n      var table = this.svg('g', {}, this.adaptor.childNodes(svg));\n      this.place(dx, 0, table);\n      this.adaptor.append(svg, table);\n    }\n\n    return dx;\n  };\n\n  SVGmtable.prototype.lineClass = function (style) {\n    return CLASSPREFIX + style;\n  };\n\n  SVGmtable.prototype.makeFrame = function (w, h, d, style) {\n    var t = this.fLine;\n    return this.svg('rect', this.setLineThickness(t, style, {\n      'data-frame': true,\n      'class': this.lineClass(style),\n      width: this.fixed(w - t),\n      height: this.fixed(h + d - t),\n      x: this.fixed(t / 2),\n      y: this.fixed(t / 2 - d)\n    }));\n  };\n\n  SVGmtable.prototype.makeVLine = function (x, style, t) {\n    var _a = this.getBBox(),\n        h = _a.h,\n        d = _a.d;\n\n    var dt = style === 'dotted' ? t / 2 : 0;\n    var X = this.fixed(x + t / 2);\n    return this.svg('line', this.setLineThickness(t, style, {\n      'data-line': 'v',\n      'class': this.lineClass(style),\n      x1: X,\n      y1: this.fixed(dt - d),\n      x2: X,\n      y2: this.fixed(h - dt)\n    }));\n  };\n\n  SVGmtable.prototype.makeHLine = function (y, style, t) {\n    var w = this.getBBox().w;\n    var dt = style === 'dotted' ? t / 2 : 0;\n    var Y = this.fixed(y - t / 2);\n    return this.svg('line', this.setLineThickness(t, style, {\n      'data-line': 'h',\n      'class': this.lineClass(style),\n      x1: this.fixed(dt),\n      y1: Y,\n      x2: this.fixed(w - dt),\n      y2: Y\n    }));\n  };\n\n  SVGmtable.prototype.setLineThickness = function (t, style, properties) {\n    if (t !== .07) {\n      properties['stroke-thickness'] = this.fixed(t);\n\n      if (style !== 'solid') {\n        properties['stroke-dasharray'] = (style === 'dotted' ? '0,' : '') + this.fixed(2 * t);\n      }\n    }\n\n    return properties;\n  };\n\n  SVGmtable.prototype.handleLabels = function (svg, _parent, dx) {\n    if (!this.hasLabels) return;\n    var labels = this.labels;\n    var attributes = this.node.attributes;\n    var side = attributes.get('side');\n    this.spaceLabels();\n    this.isTop ? this.topTable(svg, labels, side) : this.subTable(svg, labels, side, dx);\n  };\n\n  SVGmtable.prototype.spaceLabels = function () {\n    var adaptor = this.adaptor;\n    var h = this.getBBox().h;\n    var L = this.getTableData().L;\n    var space = this.getRowHalfSpacing();\n    var y = h - this.fLine;\n    var current = adaptor.firstChild(this.labels);\n\n    for (var i = 0; i < this.numRows; i++) {\n      var row = this.childNodes[i];\n\n      if (row.node.isKind('mlabeledtr')) {\n        var cell = row.childNodes[0];\n        y -= space[i] + row.H;\n        row.placeCell(cell, {\n          x: 0,\n          y: y,\n          w: L,\n          lSpace: 0,\n          rSpace: 0,\n          lLine: 0,\n          rLine: 0\n        });\n        y -= row.D + space[i + 1] + this.rLines[i];\n        current = adaptor.next(current);\n      } else {\n        y -= space[i] + row.H + row.D + space[i + 1] + this.rLines[i];\n      }\n    }\n  };\n\n  SVGmtable.prototype.topTable = function (svg, labels, side) {\n    var adaptor = this.adaptor;\n\n    var _a = this.getBBox(),\n        h = _a.h,\n        d = _a.d,\n        w = _a.w,\n        L = _a.L,\n        R = _a.R;\n\n    var W = L + (this.pWidth || w) + R;\n    var LW = this.getTableData().L;\n\n    var _b = __read(this.getPadAlignShift(side), 3),\n        align = _b[1],\n        shift = _b[2];\n\n    var dx = shift + (align === 'right' ? -W : align === 'center' ? -W / 2 : 0) + L;\n    var matrix = 'matrix(1 0 0 -1 0 0)';\n    var scale = \"scale(\" + this.jax.fixed(this.font.params.x_height * 1000 / this.metrics.ex, 2) + \")\";\n    var transform = \"translate(0 \" + this.fixed(h) + \") \" + matrix + \" \" + scale;\n    var table = this.svg('svg', {\n      'data-table': true,\n      preserveAspectRatio: align === 'left' ? 'xMinYMid' : align === 'right' ? 'xMaxYMid' : 'xMidYMid',\n      viewBox: [this.fixed(-dx), this.fixed(-h), 1, this.fixed(h + d)].join(' ')\n    }, [this.svg('g', {\n      transform: matrix\n    }, adaptor.childNodes(svg))]);\n    labels = this.svg('svg', {\n      'data-labels': true,\n      preserveAspectRatio: side === 'left' ? 'xMinYMid' : 'xMaxYMid',\n      viewBox: [side === 'left' ? 0 : this.fixed(LW), this.fixed(-h), 1, this.fixed(h + d)].join(' ')\n    }, [labels]);\n    adaptor.append(svg, this.svg('g', {\n      transform: transform\n    }, [table, labels]));\n    this.place(-L, 0, svg);\n  };\n\n  SVGmtable.prototype.subTable = function (svg, labels, side, dx) {\n    var adaptor = this.adaptor;\n\n    var _a = this.getBBox(),\n        w = _a.w,\n        L = _a.L,\n        R = _a.R;\n\n    var W = L + (this.pWidth || w) + R;\n    var labelW = this.getTableData().L;\n    var align = this.getAlignShift()[0];\n    var CW = Math.max(W, this.container.getWrapWidth(this.containerI));\n    this.place(side === 'left' ? (align === 'left' ? 0 : align === 'right' ? W - CW + dx : (W - CW) / 2 + dx) - L : (align === 'left' ? CW : align === 'right' ? W + dx : (CW + W) / 2 + dx) - L - labelW, 0, labels);\n    adaptor.append(svg, labels);\n  };\n\n  SVGmtable.kind = mtable_js_2.MmlMtable.prototype.kind;\n  SVGmtable.styles = {\n    'g[data-mml-node=\"mtable\"] > line[data-line]': {\n      'stroke-width': '70px',\n      fill: 'none'\n    },\n    'g[data-mml-node=\"mtable\"] > rect[data-frame]': {\n      'stroke-width': '70px',\n      fill: 'none'\n    },\n    'g[data-mml-node=\"mtable\"] > .mjx-dashed': {\n      'stroke-dasharray': '140'\n    },\n    'g[data-mml-node=\"mtable\"] > .mjx-dotted': {\n      'stroke-linecap': 'round',\n      'stroke-dasharray': '0,140'\n    },\n    'g[data-mml-node=\"mtable\"] > g > svg': {\n      overflow: 'visible'\n    }\n  };\n  return SVGmtable;\n}(mtable_js_1.CommonMtableMixin(Wrapper_js_1.SVGWrapper));\n\nexports.SVGmtable = SVGmtable;","map":{"version":3,"sources":["../../../../ts/output/svg/Wrappers/mtable.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spread = (this && this.__spread) || function () {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));\n    return ar;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SVGmtable = void 0;\nvar Wrapper_js_1 = require(\"../Wrapper.js\");\nvar mtable_js_1 = require(\"../../common/Wrappers/mtable.js\");\nvar mtable_js_2 = require(\"../../../core/MmlTree/MmlNodes/mtable.js\");\nvar CLASSPREFIX = 'mjx-';\nvar SVGmtable = (function (_super) {\n    __extends(SVGmtable, _super);\n    function SVGmtable(factory, node, parent) {\n        if (parent === void 0) { parent = null; }\n        var _this = _super.call(this, factory, node, parent) || this;\n        var def = { 'data-labels': true };\n        if (_this.isTop) {\n            def.transform = 'matrix(1 0 0 -1 0 0)';\n        }\n        _this.labels = _this.svg('g', def);\n        return _this;\n    }\n    SVGmtable.prototype.toSVG = function (parent) {\n        var svg = this.standardSVGnode(parent);\n        this.placeRows(svg);\n        this.handleColumnLines(svg);\n        this.handleRowLines(svg);\n        this.handleFrame(svg);\n        var dx = this.handlePWidth(svg);\n        this.handleLabels(svg, parent, dx);\n    };\n    SVGmtable.prototype.placeRows = function (svg) {\n        var _a, _b, _c;\n        var equal = this.node.attributes.get('equalrows');\n        var _d = this.getTableData(), H = _d.H, D = _d.D;\n        var HD = this.getEqualRowHeight();\n        var rSpace = this.getRowHalfSpacing();\n        var rLines = __spread([this.fLine], this.rLines, [this.fLine]);\n        var y = this.getBBox().h - rLines[0];\n        for (var i = 0; i < this.numRows; i++) {\n            var row = this.childNodes[i];\n            _a = __read(this.getRowHD(equal, HD, H[i], D[i]), 2), row.H = _a[0], row.D = _a[1];\n            _b = __read([rSpace[i], rSpace[i + 1]], 2), row.tSpace = _b[0], row.bSpace = _b[1];\n            _c = __read([rLines[i], rLines[i + 1]], 2), row.tLine = _c[0], row.bLine = _c[1];\n            row.toSVG(svg);\n            row.place(0, y - rSpace[i] - row.H);\n            y -= rSpace[i] + row.H + row.D + rSpace[i + 1] + rLines[i + 1];\n        }\n    };\n    SVGmtable.prototype.getRowHD = function (equal, HD, H, D) {\n        return (equal ? [(HD + H - D) / 2, (HD - H + D) / 2] : [H, D]);\n    };\n    SVGmtable.prototype.handleColor = function () {\n        _super.prototype.handleColor.call(this);\n        var rect = this.adaptor.firstChild(this.element);\n        if (rect) {\n            this.adaptor.setAttribute(rect, 'width', this.fixed(this.getWidth()));\n        }\n    };\n    SVGmtable.prototype.handleColumnLines = function (svg) {\n        if (this.node.attributes.get('columnlines') === 'none')\n            return;\n        var lines = this.getColumnAttributes('columnlines');\n        if (!lines)\n            return;\n        var cSpace = this.getColumnHalfSpacing();\n        var cLines = this.cLines;\n        var cWidth = this.getComputedWidths();\n        var x = this.fLine;\n        for (var i = 0; i < lines.length; i++) {\n            x += cSpace[i] + cWidth[i] + cSpace[i + 1];\n            if (lines[i] !== 'none') {\n                this.adaptor.append(svg, this.makeVLine(x, lines[i], cLines[i]));\n            }\n            x += cLines[i];\n        }\n    };\n    SVGmtable.prototype.handleRowLines = function (svg) {\n        if (this.node.attributes.get('rowlines') === 'none')\n            return;\n        var lines = this.getRowAttributes('rowlines');\n        if (!lines)\n            return;\n        var equal = this.node.attributes.get('equalrows');\n        var _a = this.getTableData(), H = _a.H, D = _a.D;\n        var HD = this.getEqualRowHeight();\n        var rSpace = this.getRowHalfSpacing();\n        var rLines = this.rLines;\n        var y = this.getBBox().h - this.fLine;\n        for (var i = 0; i < lines.length; i++) {\n            var _b = __read(this.getRowHD(equal, HD, H[i], D[i]), 2), rH = _b[0], rD = _b[1];\n            y -= rSpace[i] + rH + rD + rSpace[i + 1];\n            if (lines[i] !== 'none') {\n                this.adaptor.append(svg, this.makeHLine(y, lines[i], rLines[i]));\n            }\n            y -= rLines[i];\n        }\n    };\n    SVGmtable.prototype.handleFrame = function (svg) {\n        if (this.frame) {\n            var _a = this.getBBox(), h = _a.h, d = _a.d, w = _a.w;\n            var style = this.node.attributes.get('frame');\n            this.adaptor.append(svg, this.makeFrame(w, h, d, style));\n        }\n    };\n    SVGmtable.prototype.handlePWidth = function (svg) {\n        if (!this.pWidth) {\n            return 0;\n        }\n        var _a = this.getBBox(), w = _a.w, L = _a.L, R = _a.R;\n        var W = L + this.pWidth + R;\n        var align = this.getAlignShift()[0];\n        var CW = Math.max(this.isTop ? W : 0, this.container.getWrapWidth(this.containerI)) - L - R;\n        var dw = w - (this.pWidth > CW ? CW : this.pWidth);\n        var dx = (align === 'left' ? 0 : align === 'right' ? dw : dw / 2);\n        if (dx) {\n            var table = this.svg('g', {}, this.adaptor.childNodes(svg));\n            this.place(dx, 0, table);\n            this.adaptor.append(svg, table);\n        }\n        return dx;\n    };\n    SVGmtable.prototype.lineClass = function (style) {\n        return CLASSPREFIX + style;\n    };\n    SVGmtable.prototype.makeFrame = function (w, h, d, style) {\n        var t = this.fLine;\n        return this.svg('rect', this.setLineThickness(t, style, {\n            'data-frame': true, 'class': this.lineClass(style),\n            width: this.fixed(w - t), height: this.fixed(h + d - t),\n            x: this.fixed(t / 2), y: this.fixed(t / 2 - d)\n        }));\n    };\n    SVGmtable.prototype.makeVLine = function (x, style, t) {\n        var _a = this.getBBox(), h = _a.h, d = _a.d;\n        var dt = (style === 'dotted' ? t / 2 : 0);\n        var X = this.fixed(x + t / 2);\n        return this.svg('line', this.setLineThickness(t, style, {\n            'data-line': 'v', 'class': this.lineClass(style),\n            x1: X, y1: this.fixed(dt - d), x2: X, y2: this.fixed(h - dt)\n        }));\n    };\n    SVGmtable.prototype.makeHLine = function (y, style, t) {\n        var w = this.getBBox().w;\n        var dt = (style === 'dotted' ? t / 2 : 0);\n        var Y = this.fixed(y - t / 2);\n        return this.svg('line', this.setLineThickness(t, style, {\n            'data-line': 'h', 'class': this.lineClass(style),\n            x1: this.fixed(dt), y1: Y, x2: this.fixed(w - dt), y2: Y\n        }));\n    };\n    SVGmtable.prototype.setLineThickness = function (t, style, properties) {\n        if (t !== .07) {\n            properties['stroke-thickness'] = this.fixed(t);\n            if (style !== 'solid') {\n                properties['stroke-dasharray'] = (style === 'dotted' ? '0,' : '') + this.fixed(2 * t);\n            }\n        }\n        return properties;\n    };\n    SVGmtable.prototype.handleLabels = function (svg, _parent, dx) {\n        if (!this.hasLabels)\n            return;\n        var labels = this.labels;\n        var attributes = this.node.attributes;\n        var side = attributes.get('side');\n        this.spaceLabels();\n        this.isTop ? this.topTable(svg, labels, side) : this.subTable(svg, labels, side, dx);\n    };\n    SVGmtable.prototype.spaceLabels = function () {\n        var adaptor = this.adaptor;\n        var h = this.getBBox().h;\n        var L = this.getTableData().L;\n        var space = this.getRowHalfSpacing();\n        var y = h - this.fLine;\n        var current = adaptor.firstChild(this.labels);\n        for (var i = 0; i < this.numRows; i++) {\n            var row = this.childNodes[i];\n            if (row.node.isKind('mlabeledtr')) {\n                var cell = row.childNodes[0];\n                y -= space[i] + row.H;\n                row.placeCell(cell, { x: 0, y: y, w: L, lSpace: 0, rSpace: 0, lLine: 0, rLine: 0 });\n                y -= row.D + space[i + 1] + this.rLines[i];\n                current = adaptor.next(current);\n            }\n            else {\n                y -= space[i] + row.H + row.D + space[i + 1] + this.rLines[i];\n            }\n        }\n    };\n    SVGmtable.prototype.topTable = function (svg, labels, side) {\n        var adaptor = this.adaptor;\n        var _a = this.getBBox(), h = _a.h, d = _a.d, w = _a.w, L = _a.L, R = _a.R;\n        var W = L + (this.pWidth || w) + R;\n        var LW = this.getTableData().L;\n        var _b = __read(this.getPadAlignShift(side), 3), align = _b[1], shift = _b[2];\n        var dx = shift + (align === 'right' ? -W : align === 'center' ? -W / 2 : 0) + L;\n        var matrix = 'matrix(1 0 0 -1 0 0)';\n        var scale = \"scale(\" + this.jax.fixed((this.font.params.x_height * 1000) / this.metrics.ex, 2) + \")\";\n        var transform = \"translate(0 \" + this.fixed(h) + \") \" + matrix + \" \" + scale;\n        var table = this.svg('svg', {\n            'data-table': true,\n            preserveAspectRatio: (align === 'left' ? 'xMinYMid' : align === 'right' ? 'xMaxYMid' : 'xMidYMid'),\n            viewBox: [this.fixed(-dx), this.fixed(-h), 1, this.fixed(h + d)].join(' ')\n        }, [\n            this.svg('g', { transform: matrix }, adaptor.childNodes(svg))\n        ]);\n        labels = this.svg('svg', {\n            'data-labels': true,\n            preserveAspectRatio: (side === 'left' ? 'xMinYMid' : 'xMaxYMid'),\n            viewBox: [side === 'left' ? 0 : this.fixed(LW), this.fixed(-h), 1, this.fixed(h + d)].join(' ')\n        }, [labels]);\n        adaptor.append(svg, this.svg('g', { transform: transform }, [table, labels]));\n        this.place(-L, 0, svg);\n    };\n    SVGmtable.prototype.subTable = function (svg, labels, side, dx) {\n        var adaptor = this.adaptor;\n        var _a = this.getBBox(), w = _a.w, L = _a.L, R = _a.R;\n        var W = L + (this.pWidth || w) + R;\n        var labelW = this.getTableData().L;\n        var align = this.getAlignShift()[0];\n        var CW = Math.max(W, this.container.getWrapWidth(this.containerI));\n        this.place(side === 'left' ?\n            (align === 'left' ? 0 : align === 'right' ? W - CW + dx : (W - CW) / 2 + dx) - L :\n            (align === 'left' ? CW : align === 'right' ? W + dx : (CW + W) / 2 + dx) - L - labelW, 0, labels);\n        adaptor.append(svg, labels);\n    };\n    SVGmtable.kind = mtable_js_2.MmlMtable.prototype.kind;\n    SVGmtable.styles = {\n        'g[data-mml-node=\"mtable\"] > line[data-line]': {\n            'stroke-width': '70px',\n            fill: 'none'\n        },\n        'g[data-mml-node=\"mtable\"] > rect[data-frame]': {\n            'stroke-width': '70px',\n            fill: 'none'\n        },\n        'g[data-mml-node=\"mtable\"] > .mjx-dashed': {\n            'stroke-dasharray': '140'\n        },\n        'g[data-mml-node=\"mtable\"] > .mjx-dotted': {\n            'stroke-linecap': 'round',\n            'stroke-dasharray': '0,140'\n        },\n        'g[data-mml-node=\"mtable\"] > g > svg': {\n            overflow: 'visible'\n        }\n    };\n    return SVGmtable;\n}(mtable_js_1.CommonMtableMixin(Wrapper_js_1.SVGWrapper)));\nexports.SVGmtable = SVGmtable;\n//# sourceMappingURL=mtable.js.map"]},"metadata":{},"sourceType":"script"}